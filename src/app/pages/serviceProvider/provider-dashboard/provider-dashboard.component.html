<div class="container mt-5">
    <h2 class="mb-4 text-center">Provider Dashboard</h2>

    <!-- Loading Spinner -->
    <div *ngIf="loading" class="d-flex justify-content-center align-items-center my-5">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

    <!-- Error Message -->
    <div *ngIf="error" class="alert alert-danger text-center">{{ error }}</div>

    <!-- Event Cards -->
    <div class="row gy-4" *ngFor="let event of events">
        <div class="col-12">
            <div class="card shadow-sm border-0">
                <div class="card-header bg-book  text-white d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">{{ event.name }}</h5>
                    <small>{{ event.date | date:'mediumDate' }}</small>
                </div>
                <div class="card-body">
                    <!-- Ticket Table -->
                    <div class="table-responsive">
                        <table class="table table-hover table-bordered align-middle mb-3">
                            <thead class="table-light">
                                <tr>
                                    <th>Ticket Type</th>
                                    <th>Price</th>
                                    <th>Tickets Sold</th>
                                    <th>Total Revenue</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let tt of event.ticketTypes">
                                    <td>{{ tt.name }}</td>
                                    <td>{{ tt.price | currency:'EGP' }}</td>
                                    <td>{{ tt.ticketsSold }}</td>
                                    <td>{{ tt.grossRevenue | currency:'EGP' }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Totals -->
                    <div class="d-flex justify-content-between flex-wrap mt-3">
                        <span class="fw-bold">Total Tickets Sold: {{ event.totalTicketsSold }}</span>
                        <span class="fw-bold">Total Revenue: {{ event.totalGrossRevenue | currency:'EGP' }}</span>
                        <span class="fw-bold text-success">
                            Net Revenue: {{ event.totalNetRevenue | currency:'EGP' }}
                            <small class="text-muted">(After 8% Alatform Fee)</small>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>